dataset$lon <- coords[,1]
dataset$lat <- coords[,2]
y <- matrix ( dataset$price, ncol = 1)
y <- y
dataset <- dataset[, names(dataset) != "price"]
x <- as.matrix(dataset[, c('bedrooms', 'bathrooms', 'squareFeet', 'lon', 'lat')])
data <- preprocessing.data(x, y, n.knots = 25)
x_training <- data$x_training
x_validation <- data$x_validation
x_testing <- data$x_testing
y_training <- data$y_training
y_validation <- data$y_validation
y_testing <- data$y_testing
p_a = 0.95
p_b = 0.999
c1 = 3
c2 = 5
hyperparameter <- create.packages.hyperparameter(
p_a = 0.90,
p_b = 0.990,
c1 = 30,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.pdf(model.heavy, matrix(x_training[101, ], nrow = 1))
devtools::install('/home/dalton/SPQRX')
library(SPQRX)
dataset <- read.csv('/home/dalton/Downloads/housing (1).csv')
coords <- strsplit(gsub("POINT \\(|\\)", "", dataset$geometry), " ")
# Convert to numeric matrix
coords <- do.call(rbind, lapply(coords, function(x) as.numeric(x)))
# Assign to new columns
dataset$lon <- coords[,1]
dataset$lat <- coords[,2]
y <- matrix ( dataset$price, ncol = 1)
y <- y
dataset <- dataset[, names(dataset) != "price"]
x <- as.matrix(dataset[, c('bedrooms', 'bathrooms', 'squareFeet', 'lon', 'lat')])
data <- preprocessing.data(x, y, n.knots = 25)
x_training <- data$x_training
x_validation <- data$x_validation
x_testing <- data$x_testing
y_training <- data$y_training
y_validation <- data$y_validation
y_testing <- data$y_testing
p_a = 0.95
p_b = 0.999
c1 = 3
c2 = 5
hyperparameter <- create.packages.hyperparameter(
p_a = 0.90,
p_b = 0.990,
c1 = 30,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
hyperparameter <- create.packages.hyperparameter(
p_a = 0.90,
p_b = 0.990,
c1 = 25,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
hyperparameter <- create.packages.hyperparameter(
p_a = 0.90,
p_b = 0.99,
c1 = 32,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
hyperparameter <- create.packages.hyperparameter(
p_a = 0.90,
p_b = 0.99,
c1 = 35,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.pdf(model.heavy, matrix(x_training[101, ], nrow = 1))
devtools::install('/home/dalton/SPQRX')
library(SPQRX)
dataset <- read.csv('/home/dalton/Downloads/housing (1).csv')
coords <- strsplit(gsub("POINT \\(|\\)", "", dataset$geometry), " ")
# Convert to numeric matrix
coords <- do.call(rbind, lapply(coords, function(x) as.numeric(x)))
# Assign to new columns
dataset$lon <- coords[,1]
dataset$lat <- coords[,2]
y <- matrix ( dataset$price, ncol = 1)
y <- y
dataset <- dataset[, names(dataset) != "price"]
x <- as.matrix(dataset[, c('bedrooms', 'bathrooms', 'squareFeet', 'lon', 'lat')])
data <- preprocessing.data(x, y, n.knots = 25)
x_training <- data$x_training
x_validation <- data$x_validation
x_testing <- data$x_testing
y_training <- data$y_training
y_validation <- data$y_validation
y_testing <- data$y_testing
p_a = 0.95
p_b = 0.999
c1 = 3
c2 = 5
hyperparameter <- create.packages.hyperparameter(
p_a = 0.90,
p_b = 0.99,
c1 = 35,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
hyperparameter <- create.packages.hyperparameter(
p_a = 0.90,
p_b = 0.99,
c1 = 25,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.pdf(model.heavy, matrix(x_training[101, ], nrow = 1))
eval.plot.pdf(model.heavy, matrix(x_training[102, ], nrow = 1))
eval.plot.pdf(model.heavy, matrix(x_training[102, ], nrow = 1), npdf_points = 1000)
devtools::install('/home/dalton/SPQRX')
library(SPQRX)
dataset <- read.csv('/home/dalton/Downloads/housing (1).csv')
coords <- strsplit(gsub("POINT \\(|\\)", "", dataset$geometry), " ")
# Convert to numeric matrix
coords <- do.call(rbind, lapply(coords, function(x) as.numeric(x)))
# Assign to new columns
dataset$lon <- coords[,1]
dataset$lat <- coords[,2]
y <- matrix ( dataset$price, ncol = 1)
y <- y
dataset <- dataset[, names(dataset) != "price"]
x <- as.matrix(dataset[, c('bedrooms', 'bathrooms', 'squareFeet', 'lon', 'lat')])
data <- preprocessing.data(x, y, n.knots = 25)
x_training <- data$x_training
x_validation <- data$x_validation
x_testing <- data$x_testing
y_training <- data$y_training
y_validation <- data$y_validation
y_testing <- data$y_testing
p_a = 0.95
p_b = 0.999
c1 = 3
c2 = 5
hyperparameter <- create.packages.hyperparameter(
p_a = 0.90,
p_b = 0.99,
c1 = 25,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_testing, y_testing)
hyperparameter <- create.packages.hyperparameter(
p_a = 0.90,
p_b = 0.99,
c1 = 25,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_testing, y_testing)
hyperparameter <- create.packages.hyperparameter(
p_a = 0.95,
p_b = 0.99,
c1 = 25,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_training, y_training)
hyperparameter <- create.packages.hyperparameter(
p_a = 0.95,
p_b = 0.99,
c1 = 30,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_training, y_training)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 30, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
devtools::install('/home/dalton/SPQRX')
library(SPQRX)
dataset <- read.csv('/home/dalton/Downloads/housing (1).csv')
coords <- strsplit(gsub("POINT \\(|\\)", "", dataset$geometry), " ")
# Convert to numeric matrix
coords <- do.call(rbind, lapply(coords, function(x) as.numeric(x)))
# Assign to new columns
dataset$lon <- coords[,1]
dataset$lat <- coords[,2]
y <- matrix ( dataset$price, ncol = 1)
y <- y
dataset <- dataset[, names(dataset) != "price"]
x <- as.matrix(dataset[, c('bedrooms', 'bathrooms', 'squareFeet', 'lon', 'lat')])
data <- preprocessing.data(x, y, n.knots = 25)
x_training <- data$x_training
x_validation <- data$x_validation
x_testing <- data$x_testing
y_training <- data$y_training
y_validation <- data$y_validation
y_testing <- data$y_testing
p_a = 0.95
p_b = 0.999
c1 = 3
c2 = 5
hyperparameter <- create.packages.hyperparameter(
p_a = 0.95,
p_b = 0.999,
c1 = 30,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 30, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
hyperparameter <- create.packages.hyperparameter(
p_a = 0.9,
p_b = 0.999,
c1 = 30,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = FALSE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
hyperparameter <- create.packages.hyperparameter(
p_a = 0.95,
p_b = 0.999,
c1 = 25,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_training, y_training)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_training, y_training)
library(SPQRX)
devtools::install('/home/dalton/SPQRX')
library(SPQRX)
set.seed(555)
dataset <- read.csv('/home/dalton/Downloads/housing (1).csv')
coords <- strsplit(gsub("POINT \\(|\\)", "", dataset$geometry), " ")
# Convert to numeric matrix
coords <- do.call(rbind, lapply(coords, function(x) as.numeric(x)))
# Assign to new columns
dataset$lon <- coords[,1]
dataset$lat <- coords[,2]
y <- matrix ( dataset$price, ncol = 1)
y <- y
dataset <- dataset[, names(dataset) != "price"]
x <- as.matrix(dataset[, c('bedrooms', 'bathrooms', 'squareFeet', 'lon', 'lat')])
data <- preprocessing.data(x, y, n.knots = 25)
x_training <- data$x_training
x_validation <- data$x_validation
x_testing <- data$x_testing
y_training <- data$y_training
y_validation <- data$y_validation
y_testing <- data$y_testing
p_a = 0.95
p_b = 0.999
c1 = 3
c2 = 5
hyperparameter <- create.packages.hyperparameter(
p_a = 0.95,
p_b = 0.999,
c1 = 25,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30, 30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_training, y_training)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_training, y_training)
eval.plot.qexp(model.heavy, x_testing, y_testing)
hyperparameter <- create.packages.hyperparameter(
p_a = 0.9,
p_b = 0.99,
c1 = 25,
c2 = 5,
batch_size = 50)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30, 30), n.knots = 25, x_training = x_training, x_validation = x_validation,
y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter, spqrx = TRUE)
devtools::install('/home/dalton/SPQRX')
library(SPQRX)
set.seed(919)
n <- 5000
p <- 3
Sigma <- matrix(c(1,0.6,0.4,0.6,1,0.8,0.4,0.8,1),3,3)
Sigma
X_star = MASS::mvrnorm(n = 5000, rep(0, 3), Sigma)
cor(X_star)
X <- pnorm(X_star)
cor(X_star)
expit <- 1/(1+exp(-1+5*X[,1]*X[,2]))
Y <- rbeta(n,10*expit,10*(1-expit))
uniform_x_covariate <- matrix ( runif(n), ncol = 1)
uniform_x_covariate <- matrix ( runif(n), ncol = 1)
X <- cbind(X, uniform_x_covariate)
data <- preprocessing.data(X, matrix( Y , ncol = 1), n.knots = 25)
x_training <- data$x_training
x_validation <- data$x_validation
x_testing <- data$x_testing
y_training <- data$y_training
y_validation <- data$y_validation
y_testing <- data$y_testing
library(SPQRX)
dataset <- read.csv('/home/dalton/Downloads/housing (1).csv')
coords <- strsplit(gsub("POINT \\(|\\)", "", dataset$geometry), " ")
# Convert to numeric matrix
coords <- do.call(rbind, lapply(coords, function(x) as.numeric(x)))
# Assign to new columns
dataset$lon <- coords[,1]
dataset$lat <- coords[,2]
y <- matrix ( dataset$price, ncol = 1)
y <- y
dataset <- dataset[, names(dataset) != "price"]
x <- as.matrix(dataset[, c('bedrooms', 'bathrooms', 'squareFeet', 'lon', 'lat')])
data <- preprocessing.data(x, y, n.knots = 25)
x_training <- data$x_training
x_validation <- data$x_validation
x_testing <- data$x_testing
y_training <- data$y_training
y_validation <- data$y_validation
y_testing <- data$y_testing
p_a = 0.95
p_b = 0.999
c1 = 30
c2 = 5
hyperparameter <- list(p_a = p_a , p_b = p_b , c1 = c1, c2 = c2)
hyperparameter <- create.packages.hyperparameter(p_a = p_a , p_b = p_b , c1 = c1, c2 = c2)
library(SPQRX)
dataset <- read.csv('/home/dalton/Downloads/housing (1).csv')
coords <- strsplit(gsub("POINT \\(|\\)", "", dataset$geometry), " ")
# Convert to numeric matrix
coords <- do.call(rbind, lapply(coords, function(x) as.numeric(x)))
# Assign to new columns
dataset$lon <- coords[,1]
dataset$lat <- coords[,2]
y <- matrix ( dataset$price, ncol = 1)
y <- y
dataset <- dataset[, names(dataset) != "price"]
x <- as.matrix(dataset[, c('bedrooms', 'bathrooms', 'squareFeet', 'lon', 'lat')])
data <- preprocessing.data(x, y, n.knots = 25)
x_training <- data$x_training
x_validation <- data$x_validation
x_testing <- data$x_testing
y_training <- data$y_training
y_validation <- data$y_validation
y_testing <- data$y_testing
p_a = 0.95
p_b = 0.999
c1 = 30
c2 = 5
hyperparameter <- create.packages.hyperparameter(p_a = p_a , p_b = p_b , c1 = c1, c2 = c2)
model <- fit_spqrx(input_dim = 5, hidden_dim = c(30 , 30 , 30 , 30), n.knots = 30, x_training = x_training,
x_validation = x_validation, y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter)
eval.plot.qexp(model, x_testing, y_testing)
hyperparameter <- create.packages.hyperparameter(p_a = p_a , p_b = p_b , c1 = c1, c2 = c2)
model <- fit_spqrx(input_dim = 5, hidden_dim = c(30 , 30 , 30 , 30), n.knots = 30, x_training = x_training,
x_validation = x_validation, y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model, x_testing, y_testing)
eval.plot.qexp(model, x_testing, y_testing)
p_a = 0.95
p_b = 0.999
c1 = 25
c2 = 5
hyperparameter <- create.packages.hyperparameter(p_a = p_a , p_b = p_b , c1 = c1, c2 = c2)
model <- fit_spqrx(input_dim = 5, hidden_dim = c(30 , 30 , 30 , 30), n.knots = 30, x_training = x_training,
x_validation = x_validation, y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter)
eval.plot.qexp(model, x_testing, y_testing)
p_a = 0.95
p_b = 0.999
c1 = 25
c2 = 5
hyperparameter <- create.packages.hyperparameter(p_a = p_a , p_b = p_b , c1 = c1, c2 = c2)
model <- fit_spqrx(input_dim = 5, hidden_dim = c(30 , 30 , 30 , 30), n.knots = 25, x_training = x_training,
x_validation = x_validation, y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter)
eval.plot.qexp(model, x_testing, y_testing)
p_a = 0.95
p_b = 0.999
p_a = 0.95
p_b = 0.999
c1 = 35
c2 = 5
hyperparameter <- create.packages.hyperparameter(p_a = p_a , p_b = p_b , c1 = c1, c2 = c2)
model <- fit_spqrx(input_dim = 5, hidden_dim = c(30 , 30 , 30), n.knots = 25, x_training = x_training,
x_validation = x_validation, y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter)
eval.plot.qexp(model, x_testing, y_testing)
eval.plot.qexp(model, x_testing, y_testing)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(30 , 30 , 30), n.knots = 25, x_training = x_training,
x_validation = x_validation, y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter)
eval.plot.qexp(model.heavy, x_training, y_training)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_testing, y_testing)
model.heavy <- fit_spqrx(input_dim = 5, hidden_dim = c(45 , 45), n.knots = 25, x_training = x_training,
x_validation = x_validation, y_training = y_training, y_validation = y_validation, hyperparameter = hyperparameter)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_testing, y_testing)
model.spqr <- fit_spqrx(input_dim = 5, hidden_dim = c(45 , 45), n.knots = 25, x_training = x_training,
x_validation = x_validation, y_training = y_training, y_validation = y_validation, spqrx = TRUE)
eval.plot.qexp(model.spqr, x_testing, y_testing)
model.second <- fit_spqrx(input_dim = 5, hidden_dim = c(45 , 45), n.knots = 25, x_training = x_training,
x_validation = x_validation, y_training = y_training, y_validation = y_validation, spqrx = FALSE)
eval.plot.qexp(model, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.spqr, x_testing, y_testing)
eval.plot.qexp(model.second, x_testing, y_testing)
eval.plot.qexp(model.second, x_testing, y_testing)
model.second <- fit_spqrx(input_dim = 5, hidden_dim = c(45 , 45), n.knots = 20, x_training = x_training,
x_validation = x_validation, y_training = y_training, y_validation = y_validation, spqrx = FALSE)
eval.plot.qexp(model.second, x_testing, y_testing)
eval.plot.qexp(model.heavy, x_testing, y_testing)
eval.plot.qexp(model.spqr, x_testing, y_testing)
eval.plot.shap(model.heavy, matrix(x_training[102, ], nrow = 1), tau = 0.5)
eval.plot.shap(model.heavy, x_training, x_testing[c(100:120), ])
shapley_values <- eval.explain.shapr(model.heavy, x_training, x_testing[c(100:120), ], origin_output = TRUE)
shapley_values <- eval.explain.shapr(model.heavy, x_training, x_testing[c(100:120), ], origin_output = TRUE)
shapley_values <- eval.explain.shapr(model.heavy, x_training, x_testing[c(100:120), ], original_output = TRUE)
library(dplyr)
library(tidyr)
library(ggplot2)
shap_result <- shapley_values %>%
pivot_longer(
cols = -case,
names_to = "feature",
values_to = "feature_weight"
) %>%
group_by(feature) %>%
mutate(mean_abs_weight = mean(abs(feature_weight))) %>%
ungroup() %>%
mutate(feature = reorder(feature, mean_abs_weight))
shap_result <- shapley_values$shapley_values_est %>%
pivot_longer(
cols = -case,
names_to = "feature",
values_to = "feature_weight"
) %>%
group_by(feature) %>%
mutate(mean_abs_weight = mean(abs(feature_weight))) %>%
ungroup() %>%
mutate(feature = reorder(feature, mean_abs_weight))
hap_result <- shapley_values$shapley_values_est %>%
as.data.frame() %>%
tibble::rownames_to_column("case") %>%
pivot_longer(
cols = -case,
names_to = "feature",
values_to = "feature_weight"
)
shap_result <- shapley_values$shapley_values_est %>%
as.data.frame() %>%
tibble::rownames_to_column("case") %>%
pivot_longer(
cols = -case,
names_to = "feature",
values_to = "feature_weight"
)
# Plot
ggplot(shap_result, aes(x = feature_weight, y = feature)) +
geom_jitter(height = 0.2, alpha = 0.6, size = 1.5) +
labs(
x = "SHAP Contribution",
y = "Feature",
title = "SHAP Summary Plot"
) +
theme_minimal()
shap_result <- shapley_values$shapley_values_est[,-1] %>%
as.data.frame() %>%
tibble::rownames_to_column("case") %>%
pivot_longer(
cols = -case,
names_to = "feature",
values_to = "feature_weight"
)
# Plot
ggplot(shap_result, aes(x = feature_weight, y = feature)) +
geom_jitter(height = 0.2, alpha = 0.6, size = 1.5) +
labs(
x = "SHAP Contribution",
y = "Feature",
title = "SHAP Summary Plot"
) +
theme_minimal()
devtools::install('/home/dalton/SPQRX')
devtools::install('/home/dalton/SPQRX')
devtools::install('/home/dalton/SPQRX')
